{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/ujjwal/Desktop/Imgur/client/src/components/pages/Home.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Pusher from \"pusher-js\";\nimport Spinner from \"react-spinkit\";\n\nclass Home extends Component {\n  constructor() {\n    super();\n\n    this.fileChangedHandler = event => {\n      const file = event.target.files[0];\n      this.setState({\n        selectedFile: file\n      });\n    };\n\n    this.uploadImage = event => {\n      event.preventDefault();\n      if (!this.state.selectedFile) return;\n      this.setState({\n        loading: true\n      });\n      const formData = new FormData();\n      formData.append(\"image\", this.state.selectedFile, this.state.selectedFile.name);\n      axios.post(\"http://localhost:3005\", formData).then(({\n        data\n      }) => {\n        this.setState({\n          loading: false\n        });\n      });\n    };\n\n    this.state = {\n      images: [],\n      selectedFile: null,\n      loading: false\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      loading: true\n    });\n    axios.get(\"http://localhost:3005\").then(({\n      data\n    }) => {\n      this.setState({\n        images: [...data, ...this.state.images],\n        loading: false\n      });\n    });\n    const pusher = new Pusher(\"888dc73d4ed3cba9a260\", {\n      cluster: \"ap2\",\n      encrypted: true\n    });\n    const channel = pusher.subscribe(\"gallery\");\n    channel.bind(\"upload\", data => {\n      this.setState({\n        images: [data.image, ...this.state.images]\n      });\n    });\n  }\n\n  render() {\n    const image = (url, index) => /*#__PURE__*/_jsxDEV(\"img\", {\n      alt: \"\",\n      className: \"photo\",\n      src: url\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this);\n\n    const images = this.state.images.map(e => image(e.secure_url, e._id));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"title\",\n          children: \"ADD IMAGE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          method: \"post\",\n          onSubmit: this.uploadImage,\n          className: \"form\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"gallery-image\",\n            type: \"file\",\n            name: \"image\",\n            onChange: this.fileChangedHandler,\n            className: \"form-input\",\n            accept: \".jpg, .jpeg, .png\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            type: \"submit\",\n            children: \"Upload!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-indicator\",\n        children: this.state.loading ? /*#__PURE__*/_jsxDEV(Spinner, {\n          name: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 33\n        }, this) : \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"gallery\",\n        children: images\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/home/ujjwal/Desktop/Imgur/client/src/components/pages/Home.js"],"names":["React","Component","axios","Pusher","Spinner","Home","constructor","fileChangedHandler","event","file","target","files","setState","selectedFile","uploadImage","preventDefault","state","loading","formData","FormData","append","name","post","then","data","images","componentDidMount","get","pusher","cluster","encrypted","channel","subscribe","bind","image","render","url","index","map","e","secure_url","_id"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Pusher from \"pusher-js\";\nimport Spinner from \"react-spinkit\";\n\n\nclass Home extends Component {\n  constructor() {\n    super();\n    this.state = {\n      images: [],\n      selectedFile: null,\n      loading: false,\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      loading: true,\n    });\n\n    axios.get(\"http://localhost:3005\").then(({ data }) => {\n      this.setState({\n        images: [...data, ...this.state.images],\n        loading: false,\n      });\n    });\n\n    const pusher = new Pusher(\"888dc73d4ed3cba9a260\", {\n      cluster: \"ap2\",\n      encrypted: true,\n    });\n\n    const channel = pusher.subscribe(\"gallery\");\n    channel.bind(\"upload\", (data) => {\n      this.setState({\n        images: [data.image, ...this.state.images],\n      });\n    });\n  }\n\n  fileChangedHandler = (event) => {\n    const file = event.target.files[0];\n    this.setState({ selectedFile: file });\n  };\n\n  uploadImage = (event) => {\n    event.preventDefault();\n\n    if (!this.state.selectedFile) return;\n\n    this.setState({\n      loading: true,\n    });\n\n    const formData = new FormData();\n    formData.append(\n      \"image\",\n      this.state.selectedFile,\n      this.state.selectedFile.name\n    );\n\n    axios.post(\"http://localhost:3005\", formData).then(({ data }) => {\n      this.setState({\n        loading: false,\n      });\n    });\n  };\n\n  render() {\n    const image = (url, index) => (\n      <img alt=\"\" className=\"photo\" key={index} src={url} />\n    );\n\n    const images = this.state.images.map((e) => image(e.secure_url, e._id));\n\n    return (\n      <div>\n        <div className=\"form-container\">\n          <h1 className=\"title\">ADD IMAGE</h1>\n\n          <form method=\"post\" onSubmit={this.uploadImage} className=\"form\">\n            <input\n              id=\"gallery-image\"\n              type=\"file\"\n              name=\"image\"\n              onChange={this.fileChangedHandler}\n              className=\"form-input\"\n              accept=\".jpg, .jpeg, .png\"\n            />\n            <button className=\"btn\" type=\"submit\">\n              Upload!\n            </button>\n          </form>\n        </div>\n        <div className=\"loading-indicator\">\n          {this.state.loading ? <Spinner name=\"spinner\" /> : \"\"}\n        </div>\n\n        <div className=\"gallery\">{images}</div>\n      </div>\n    );\n  }\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}